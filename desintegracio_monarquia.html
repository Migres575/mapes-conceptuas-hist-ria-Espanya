<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>La desintegraci√≥ de la monarquia (1857-1868) - Mapa Conceptual</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1800px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }

    header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 3px solid #2C3E50;
    }

    h1 {
      color: #2C3E50;
      font-size: 2.5em;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #666;
      font-size: 1.1em;
      margin-bottom: 15px;
    }

    .intro {
      max-width: 900px;
      margin: 0 auto 30px;
      text-align: center;
      line-height: 1.6;
      color: #555;
      font-size: 1.05em;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .controls button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
    }

    .controls button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }

    .controls button:active {
      transform: translateY(0);
    }

    #mermaid-container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      overflow-x: auto;
      min-height: 1400px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    #mermaid-container .mermaid {
      width: 100%;
      display: flex;
      justify-content: center;
      margin: 0 auto;
    }

    #mermaid-container .mermaid svg {
      max-width: 100%;
      height: auto;
      min-height: 1300px;
      display: block;
      margin: 0 auto;
    }

    .legend {
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
      margin-top: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
    }

    .legend-color {
      width: 30px;
      height: 20px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .footer {
      text-align: center;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 2px solid #eee;
      color: #999;
      font-style: italic;
    }

    @media print {
      body {
        background: white;
        padding: 0;
      }
      .controls {
        display: none;
      }
      .container {
        box-shadow: none;
        padding: 20px;
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }
      h1 {
        font-size: 1.8em;
      }
      .controls {
        flex-direction: column;
      }
      .controls button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>La desintegraci√≥ de la monarquia (1857-1868)</h1>
      <p class="subtitle">Mapa Conceptual Complet</p>
    </header>

    <p class="intro">
      Aquest per√≠ode marca el declivi final de la monarquia d'Isabel II, caracteritzat per la inestabilitat pol√≠tica, la repressi√≥ governamental i el creixement de l'oposici√≥ que culminaria en la Revoluci√≥ de 1868.
    </p>

    <div class="controls">
      <button onclick="window.print()">üñ®Ô∏è Imprimir / Guardar PDF</button>
      <button onclick="descarregarImatge()">üíæ Descarregar Imatge</button>
      <button onclick="ajustarZoom(1.2)">üîç Ampliar</button>
      <button onclick="ajustarZoom(0.8)">üîé Reduir</button>
      <button onclick="reiniciarZoom()">üîÑ Reiniciar Zoom</button>
    </div>

    <div id="mermaid-container">
      <div class="mermaid">
%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#E8F4F8','primaryTextColor':'#000','primaryBorderColor':'#2C3E50','lineColor':'#555','secondaryColor':'#FFF4E6','tertiaryColor':'#F0E8FF','fontSize':'14px'}}}%%

graph TB
    Title["<b>LA DESINTEGRACI√ì DE LA<br/>MONARQUIA 1857-1868</b>"]
    
    Title --> Reaccio["<b>üîÑ LA REACCI√ì MODERADA</b>"]
    
    Reaccio --> Colp56["<b>‚öîÔ∏è DESPR√âS DEL COLP 1856</b><br/>Reina torna nomenar<br/>Narv√°ez president<br/>Restablir moderantisme<br/>m√©s conservador i autoritari"]
    
    Colp56 --> Elec57["<b>üó≥Ô∏è ELECCIONS 1857</b><br/>Majoria moderada<br/>Breu legislatura 1857-1858"]
    
    Elec57 --> Moyano["<b>üìö LLEI INSTRUCCI√ì P√öBLICA</b><br/>Ministre Moyano 1857<br/>Divisi√≥ ensenyament:<br/>Prim√†ria, secund√†ria, universit√†ria<br/>Inspecci√≥ Esgl√©sia<br/>sistema educatiu<br/>1900: 57% homes i 33%<br/>dones alfabetitzades<br/>Poc impacte de la llei"]
    
    Colp56 --> Mobilitz["<b>üì¢ MOBILITZACIONS</b><br/>Persist√®ncia cicle males collites<br/>Dem√≤crates, republicans<br/>Grups de jornalers<br/>Reclamen faena i salaris dignes<br/>Crema registres notarials<br/>Enfrontaments Gu√†rdia Civil<br/>150 condemnes a mort<br/>Intensitat repressi√≥ Narv√°ez"]
    
    Title --> Unio["<b>ü§ù GOVERN UNIONISTA<br/>O'DONNELL 1858-1863</b>"]
    
    Unio --> Juny58["<b>üìÖ JUNY 1858</b><br/>Reina confia govern O'Donnell<br/>L√≠der Uni√≥ Liberal<br/>Partit nascut conflu√®ncia<br/>sectors moderats i progressistes"]
    
    Juny58 --> Corts58["<b>üèõÔ∏è CORTS ELECCIONS 1858</b><br/>Mostren majoria unionista<br/>Nou govern liberalitza<br/>Constituci√≥ 1845<br/>Disminuir control premsa<br/>Augmentar autonomia ajuntaments<br/>Nova Llei electoral<br/>amplia electors<br/>recupera prov√≠ncia<br/>com a circumscripci√≥<br/>Prosseguir expansi√≥ ferrocarril<br/>Reprendre desamortitzaci√≥ civil<br/>Augmentar inversi√≥ obres p√∫bliques"]
    
    Unio --> Expansio["<b>üí∞ EXPANSI√ì ECON√íMICA</b><br/>Anys 1858-1866<br/>Increment recursos Hisenda<br/>Gastar en pol√≠tica exterior activa"]
    
    Expansio --> Colonial["<b>üåç POT√àNCIA COLONIAL</b><br/>Operacions militars<br/>Refer imatge Espanya<br/>Fomentar nacionalisme espanyol<br/>Aglutinant interclassista<br/>Acontentar sectors ex√®rcit<br/>Campanyes car√†cter internacional"]
    
    Colonial --> Cotxinxina["<b>‚õµ EXPEDICI√ì COTXINXINA</b><br/>1858-1863<br/>Col¬∑laboraci√≥ amb Fran√ßa<br/>Justificada matan√ßa missioners<br/>Establir port potenciar<br/>enviament a Cuba<br/>culis xinesos<br/>r√®gim semiesclavitud"]
    
    Colonial --> Marroc["<b>‚öîÔ∏è CAMPANYES MILITARS<br/>DEL MARROC</b><br/>1859-1860<br/>Motivades disputes frontereres<br/>Triomf batalles Tetuan i Castillejos<br/>Capitalitzades per O'Donnell<br/>i progressista Prim<br/>Pau Wad-Ras<br/>Incorporaci√≥ territori Ifni<br/>Ampliaci√≥ pla√ßa Ceuta"]
    
    Colonial --> Mexic["<b>üá≤üáΩ INTERVENCI√ì M√àXIC</b><br/>1862<br/>Amb francesos i brit√†nics<br/>Exigir govern mexic√†<br/>cobrament deutes endarrerits<br/>Espanyols i brit√†nics<br/>acaben retirant-se<br/>desavinences amb francesos"]
    
    Title --> Crisi["<b>üí• CRISI FINAL DEL SISTEMA<br/>1863-1868</b>"]
    
    Crisi --> Radical63["<b>‚ö° RADICALITZACI√ì<br/>AUTORITARISME</b><br/>Des del 1863<br/>Fort intervencionisme reina<br/>Confirmat per gran influ√®ncia<br/>camarilles<br/>Busquen favor reial<br/>o governamental<br/>Provoca gran<br/>inestabilitat pol√≠tica"]
    
    Crisi --> Oposicio["<b>üìö OPOSICI√ì CREIXENT</b><br/>S'enfortia especialment<br/>√†mbit universitari<br/>Cr√≠tiques r√®gim isabel¬∑l√≠<br/>Intel¬∑lectuals dem√≤crates<br/>i republicans"]
    
    Oposicio --> NitSant["<b>üéì NIT DE SANT DANIEL 1865</b><br/>Successos Universitat Madrid<br/>Professor republic√† Emilio Castelar<br/>destitu√Øt seva c√†tedra<br/>Rector i estudiants protesten<br/>Puerta del Sol<br/>Manifestants violentament reprimits<br/>Nou estudiants morts<br/>M√©s cent ferits<br/>Centenar detencions<br/>Indigna opini√≥ p√∫blica<br/>Augmenta impopularitat Narv√°ez"]
    
    Crisi --> Exclusio["<b>üö´ EXCLUSI√ì ISABEL II</b><br/>Progressistes, dem√≤crates<br/>i republicans<br/>Responsabilitzen Isabel II<br/>Exclusa mal funcionament<br/>institucions<br/>Pronunciament √∫nica via<br/>acc√©s al poder"]
    
    Crisi --> SanGil["<b>‚öîÔ∏è REVOLTA SERGENTS<br/>CASERNA SAN GIL 1866</b><br/>Es converteix en<br/>revolta popular Madrid<br/>Durament reprimida"]
    
    Crisi --> Narvaez66["<b>üîí GOVERN NARV√ÅEZ</b><br/>Tanca les Corts<br/>Estrat√®gia defensiva repressi√≥<br/>davant inestabilitat<br/>pol√≠tica i econ√≤mica"]
    
    Crisi --> Crisi66["<b>üìâ CRISI SUBSIST√àNCIES 1866</b><br/>Provoca augment preus<br/>Malestar popular<br/>Progressistes i dem√≤crates<br/>signen Pacte d'Oostende<br/>Posar fi monarquia Isabel II<br/>Formar govern provisional<br/>Convocar Corts Constituents<br/>mitj√† sufragi universal mascul√≠"]
    
    Crisi --> Oostende67["<b>ü§ù PACTE OOSTENDE 1867</b><br/>S'incorporen els unionistes<br/>amb bona part c√∫pula militar<br/>Amplis sectors societat<br/>Coincideixen fer gir situaci√≥<br/>Ja no podia consistir<br/>nom√©s en canvi de govern"]

    style Title fill:#2C3E50,stroke:#000,stroke-width:4px,color:#fff
    style Reaccio fill:#FFE5CC,stroke:#E67E22,stroke-width:2px
    style Colp56 fill:#FFE5CC,stroke:#E67E22,stroke-width:2px
    style Elec57 fill:#FFF4E6,stroke:#E67E22,stroke-width:2px
    style Moyano fill:#FFF9E6,stroke:#F39C12,stroke-width:2px
    style Mobilitz fill:#FFCCCC,stroke:#C0392B,stroke-width:2px
    style Unio fill:#E8F4F8,stroke:#3498DB,stroke-width:2px
    style Juny58 fill:#D6EAF8,stroke:#3498DB,stroke-width:2px
    style Corts58 fill:#E8F4F8,stroke:#3498DB,stroke-width:2px
    style Expansio fill:#E8DAFF,stroke:#8E44AD,stroke-width:2px
    style Colonial fill:#F0E8FF,stroke:#8E44AD,stroke-width:2px
    style Cotxinxina fill:#F8F0FF,stroke:#8E44AD,stroke-width:2px
    style Marroc fill:#F8F0FF,stroke:#8E44AD,stroke-width:2px
    style Mexic fill:#F8F0FF,stroke:#8E44AD,stroke-width:2px
    style Crisi fill:#FFD6D6,stroke:#C0392B,stroke-width:3px
    style Radical63 fill:#FFCCCC,stroke:#C0392B,stroke-width:2px
    style Oposicio fill:#FFCCCC,stroke:#C0392B,stroke-width:2px
    style NitSant fill:#FFB3B3,stroke:#C0392B,stroke-width:2px
    style Exclusio fill:#FFCCCC,stroke:#C0392B,stroke-width:2px
    style SanGil fill:#FFB3B3,stroke:#C0392B,stroke-width:2px
    style Narvaez66 fill:#FFCCCC,stroke:#C0392B,stroke-width:2px
    style Crisi66 fill:#FFB3B3,stroke:#C0392B,stroke-width:2px
    style Oostende67 fill:#FF9999,stroke:#C0392B,stroke-width:2px
      </div>
    </div>

    <div class="legend">
      <div class="legend-item">
        <div class="legend-color" style="background:#FFE5CC;"></div>
        <span>Reacci√≥ Moderada</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background:#E8F4F8;"></div>
        <span>Govern Unionista</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background:#E8DAFF;"></div>
        <span>Expansi√≥ i Colonialisme</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background:#FFF9E6;"></div>
        <span>Reformes Educatives</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background:#FFD6D6;"></div>
        <span>Crisi Final del Sistema</span>
      </div>
    </div>

    <div class="footer">
      Elaboraci√≥ pr√≤pia ‚Äî 2025
    </div>
  </div>

  <script>
    mermaid.initialize({ 
      startOnLoad: true, 
      theme: 'base',
      securityLevel: 'loose',
      flowchart: {
        useMaxWidth: false,
        htmlLabels: true,
        curve: 'basis',
        padding: 30,
        nodeSpacing: 100,
        rankSpacing: 150
      }
    });

    let zoomLevel = 1;

    function ajustarZoom(factor) {
      zoomLevel *= factor;
      const svg = document.querySelector('.mermaid svg');
      if (svg) {
        svg.style.transform = `scale(${zoomLevel})`;
        svg.style.transformOrigin = 'top center';
        svg.style.transition = 'transform 0.3s ease';
      }
    }

    function reiniciarZoom() {
      zoomLevel = 1;
      const svg = document.querySelector('.mermaid svg');
      if (svg) {
        svg.style.transform = 'scale(1)';
      }
    }

    function descarregarImatge() {
      const svg = document.querySelector('.mermaid svg');
      if (!svg) {
        alert('Espereu que el diagrama es carregue completament');
        return;
      }

      const serializer = new XMLSerializer();
      const svgString = serializer.serializeToString(svg);
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const img = new Image();

      const svgBlob = new Blob([svgString], {type: 'image/svg+xml;charset=utf-8'});
      const url = URL.createObjectURL(svgBlob);

      img.onload = function() {
        canvas.width = img.width * 2;
        canvas.height = img.height * 2;
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

        canvas.toBlob(function(blob) {
          const downloadUrl = URL.createObjectURL(blob);
          const a = document.createElement('a');
          const date = new Date().toISOString().split('T')[0];
          a.href = downloadUrl;
          a.download = `desintegracio-monarquia-${date}.png`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
          URL.revokeObjectURL(downloadUrl);
        });
      };

      img.src = url;
    }
  </script>
</body>
</html>