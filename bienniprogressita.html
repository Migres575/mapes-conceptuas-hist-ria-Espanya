<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Bienni Progressista (1854-1856) - Mapa Conceptual</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
    <style>
        @media print {
            body {
                margin: 0;
                padding: 20px;
            }
            .controls {
                display: none;
            }
            #mermaid-container {
                page-break-inside: avoid;
            }
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        .controls {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        
        .controls button {
            background: #16A085;
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .controls button:hover {
            background: #138D75;
        }
        
        #mermaid-container {
            background: white;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #666;
            font-style: italic;
            border-top: 1px solid #ddd;
        }
        
        h1 {
            text-align: center;
            color: #16A085;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>El Bienni Progressista (1854-1856)</h1>
        <p class="subtitle">Mapa Conceptual - Format A4 Horitzontal</p>
        
        <div class="controls">
            <button onclick="window.print()">üñ®Ô∏è Imprimir / Guardar com a PDF</button>
            <button onclick="descarregarImatge()">üíæ Descarregar com a Imatge</button>
            <button onclick="ajustarZoom(1.2)">üîç Ampliar</button>
            <button onclick="ajustarZoom(0.8)">üîç Reduir</button>
        </div>
        
        <div id="mermaid-container">
            <div class="mermaid">
%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#E8F4F8','primaryTextColor':'#000','primaryBorderColor':'#16A085','lineColor':'#333','secondaryColor':'#FFF4E6','tertiaryColor':'#F0E8FF','noteBkgColor':'#E8F8E8'}}}%%

graph TD
    Title["<b>EL BIENNI PROGRESSISTA<br/>1854-1856</b>"]
    
    Title --> Col1["REVOLUCI√ì 1854"]
    Title --> Col2["LEGISLACI√ì ECON√íMICA"]
    Title --> Col3["PROBLEMES SOCIALS"]
    Title --> Col4["CRISI I FINAL"]
    
    %% COLUMNA 1: REVOLUCI√ì
    Col1 --> Rev1["<b>CONTEXT</b><br/>Monopoli poder moderat<br/>Crisi subsist√®ncies<br/>Pronunciament O'Donnell"]
    
    Rev1 --> Rev2["<b>MANIFEST MANZANARES</b><br/>Reforma Llei electoral<br/>Reducci√≥ impostos<br/>Restauraci√≥ Mil√≠cia Nacional"]
    
    Rev2 --> Rev3["<b>JORNADES JULIOL 1854</b><br/>Saragossa, Barcelona<br/>Val√®ncia, Madrid<br/>Juntes locals<br/>Progressistes i dem√≤crates"]
    
    Rev3 --> Rev4["<b>NOU GOVERN</b><br/>Espartero president<br/>O'Donnell ministre Guerra<br/>Recuperaci√≥ legislaci√≥<br/>anterior 1844"]
    
    Rev4 --> Rev5["<b>CORTS CONSTITUENTS</b><br/>Llei electoral 1837<br/>Majoria progressistes<br/>20 diputats dem√≤crates<br/>Projecte Constituci√≥ 1856<br/>no sancionat"]
    
    %% COLUMNA 2: LEGISLACI√ì ECON√íMICA
    Col2 --> Leg1["<b>DESAMORTITZACI√ì<br/>PASCUAL MADOZ 1855</b>"]
    
    Leg1 --> Leg2["<b>AFECTA</b><br/>Propietat municipal<br/>B√©ns col¬∑lectius<br/>B√©ns propis i comunals"]
    
    Leg2 --> Leg3["<b>OBJECTIUS</b><br/>Recursos Hisenda<br/>Agricultura de mercat<br/>Burgesia agr√†ria beneficiada<br/>Llauradors desposse√Øts"]
    
    Col2 --> Leg4["<b>LLEI FERROCARRILS 1855</b>"]
    
    Leg4 --> Leg5["<b>INCENTIUS</b><br/>Avantatges fiscals<br/>Subvencions constructores<br/>Inversors estrangers<br/>francesos i brit√†nics"]
    
    Leg5 --> Leg6["<b>MERCAT FINANCER</b><br/>Llei societats banc√†ries 1856<br/>Entrada capitals<br/>Euf√≤ria borses<br/>Conniv√®ncia poder<br/>econ√≤mic-pol√≠tic-reial"]
    
    Col2 --> Leg7["<b>ALTRES</b><br/>Tel√®graf<br/>Xarxa carreteres<br/>Societats per accions<br/>Mineria"]
    
    %% COLUMNA 3: PROBLEMES SOCIALS
    Col3 --> Prob1["<b>CONDICIONS POPULARS</b><br/>No milloren<br/>Crisi subsist√®ncies<br/>Augment preus<br/>Epid√®mia c√≤lera<br/>Mortalitat elevada"]
    
    Col3 --> Prob2["<b>CONFLICTIVITAT<br/>CATALUNYA</b>"]
    
    Prob2 --> Prob3["<b>CLIMA SOCIAL</b><br/>Vagues f√†briques<br/>Revolta ciutat<br/>Demanda millora salaris<br/>Reducci√≥ jornada"]
    
    Prob3 --> Prob4["<b>MESURES REPRESSIVES</b><br/>Estat de setge<br/>Prohibici√≥ associacions<br/>Detenci√≥ treballadors<br/>Execuci√≥ Josep Barcel√≥"]
    
    Prob4 --> Prob5["<b>PRIMERA VAGA GENERAL<br/>2 JULIOL 1855</b><br/>Zones industrials Catalunya"]
    
    Col3 --> Prob6["<b>MEDI RURAL 1856</b><br/>Al√ßamements camperols<br/>Castella<br/>Motins i incendis<br/>Finques i f√†briques"]
    
    %% COLUMNA 4: CRISI I FINAL
    Col4 --> Cri1["<b>CONFLICTIVITAT 1856</b><br/>O'Donnell mesures dures<br/>Enfrontament Espartero"]
    
    Cri1 --> Cri2["<b>INTERVENCI√ì REINA</b><br/>Nomena O'Donnell president<br/>Diputats progressistes<br/>i dem√≤crates<br/>Moci√≥ censura<br/>Sol¬∑licitud sancionar<br/>Constituci√≥"]
    
    Cri2 --> Cri3["<b>RESPOSTA</b><br/>CANONEJAR<br/>CONGR√âS DIPUTATS"]
    
    Cri3 --> Cri4["<b>DESARMAMENT</b><br/>Mil√≠cia a Saragossa<br/>i Barcelona<br/>Facci√≥ ex√®rcit<br/>a O'Donnell"]
    
    Cri4 --> Cri5["<b>COLP<br/>CONTRARREVOLUCIONARI</b><br/>Tancar Corts<br/>Suprimir Mil√≠cia<br/>Destituir ajuntaments<br/>Anul¬∑lar llibertat premsa<br/><b>FI DEL BIENNI</b>"]
    
    style Title fill:#16A085,stroke:#000,stroke-width:4px,color:#fff,font-size:18px
    
    style Col1 fill:#AED6F1,stroke:#16A085,stroke-width:3px,font-weight:bold
    style Col2 fill:#FFEECC,stroke:#F39C12,stroke-width:3px,font-weight:bold
    style Col3 fill:#FFCCCC,stroke:#C0392B,stroke-width:3px,font-weight:bold
    style Col4 fill:#E8DAFF,stroke:#8E44AD,stroke-width:3px,font-weight:bold
    
    style Rev1 fill:#D6EAF8,stroke:#16A085,stroke-width:2px
    style Rev2 fill:#D6EAF8,stroke:#16A085,stroke-width:2px
    style Rev3 fill:#D6EAF8,stroke:#16A085,stroke-width:2px
    style Rev4 fill:#D6EAF8,stroke:#16A085,stroke-width:2px
    style Rev5 fill:#AED6F1,stroke:#16A085,stroke-width:2px
    
    style Leg1 fill:#FFF4D9,stroke:#F39C12,stroke-width:2px
    style Leg2 fill:#FFEECC,stroke:#F39C12,stroke-width:1px
    style Leg3 fill:#FFEECC,stroke:#F39C12,stroke-width:1px
    style Leg4 fill:#FFF4D9,stroke:#F39C12,stroke-width:2px
    style Leg5 fill:#FFEECC,stroke:#F39C12,stroke-width:1px
    style Leg6 fill:#FFE5CC,stroke:#E67E22,stroke-width:2px
    style Leg7 fill:#FFEECC,stroke:#F39C12,stroke-width:1px
    
    style Prob1 fill:#FFCCCC,stroke:#C0392B,stroke-width:1px
    style Prob2 fill:#FFB3B3,stroke:#C0392B,stroke-width:2px
    style Prob3 fill:#FFCCCC,stroke:#C0392B,stroke-width:1px
    style Prob4 fill:#FFCCCC,stroke:#C0392B,stroke-width:1px
    style Prob5 fill:#FF9999,stroke:#C0392B,stroke-width:3px
    style Prob6 fill:#FFCCCC,stroke:#C0392B,stroke-width:1px
    
    style Cri1 fill:#F0E8FF,stroke:#8E44AD,stroke-width:1px
    style Cri2 fill:#E8DAFF,stroke:#8E44AD,stroke-width:1px
    style Cri3 fill:#D7BFE8,stroke:#8E44AD,stroke-width:3px
    style Cri4 fill:#E8DAFF,stroke:#8E44AD,stroke-width:1px
    style Cri5 fill:#C8A8E0,stroke:#8E44AD,stroke-width:3px
    
  
        </div>
        
        <div class="footer">
            Elaboraci√≥ pr√≤pia ‚Äì 2025
        </div>
    </div>
    
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            securityLevel: 'loose'
        });
        
        let zoomLevel = 1;
        
        function ajustarZoom(factor) {
            zoomLevel *= factor;
            const container = document.querySelector('.mermaid svg');
            if (container) {
                container.style.transform = `scale(${zoomLevel})`;
                container.style.transformOrigin = 'top center';
            }
        }
        
        function descarregarImatge() {
            const svg = document.querySelector('.mermaid svg');
            if (svg) {
                const serializer = new XMLSerializer();
                const svgString = serializer.serializeToString(svg);
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = function() {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.fillStyle = 'white';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0);
                    
                    canvas.toBlob(function(blob) {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = 'bienni-progressista-1854-1856-mapa-conceptual.png';
                        a.click();
                        URL.revokeObjectURL(url);
                    });
                };
                
                img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgString)));
            }
        }
    </script>
</body>
</html>